<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Anthropic Chat :: Spring AI Reference</title>
    <link rel="canonical" href="../../../api/chat/anthropic-chat.html">
    <link rel="prev" href="bedrock-converse.html">
    <link rel="next" href="azure-openai-chat.html">
    <meta name="generator" content="Antora 3.2.0-alpha.6">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="https://docs.spring.io/spring-ai/reference/_/css/site.css">
    <link rel="stylesheet" href="https://docs.spring.io/spring-ai/reference/_/css/vendor/search.css">
    <link rel="stylesheet" href="https://docs.spring.io/spring-ai/reference/_/css/vendor/page-search.css">
    <link rel="stylesheet" href="https://docs.spring.io/spring-ai/reference/_/css/vendor/asciidoctor-tabs.css">

    <meta name="antora-ui-version" content="v0.4.17"> 
    <meta name="version" content="1.1.0">
    <meta name="component" content="ai">
    <meta name="latest-version" content="false">
    <link rel="icon" href="https://docs.spring.io/spring-ai/reference/_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img id="springlogo" class="block" src="https://docs.spring.io/spring-ai/reference/_/img/spring-logo.svg" alt="Spring"/>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="anthropic-chat.html#">Why Spring</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/why-spring">Overview</a>
            <a class="navbar-item" href="https://spring.io/microservices">Microservices</a>
            <a class="navbar-item" href="https://spring.io/reactive">Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a class="navbar-item" href="https://spring.io/serverless">Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="anthropic-chat.html#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a class="navbar-item" href="https://spring.io/quickstart">Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="anthropic-chat.html#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" href="https://spring.io/projects">Overview</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-boot">Spring Boot</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-framework">Spring Framework</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-cloud">Spring Cloud</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-cloud-dataflow">Spring Cloud Data Flow</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-data">Spring Data</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-integration">Spring Integration</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-batch">Spring Batch</a>
            <a class="navbar-item" href="https://spring.io/projects/spring-security">Spring Security</a>
            <a class="navbar-item navbar-item-special" href="https://spring.io/projects">View all projects</a>
            <li class="navbar-item navbar-item-special-3">DEVELOPMENT TOOLS</li>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a class="navbar-item navbar-item-special-2" href="https://start.spring.io">Spring Initializr
              <svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><polyline points="15 10.94 15 15 1 15 1 1 5.06 1" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2"></polyline><polyline points="8.93 1 15 1 15 7.07" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2"></polyline><line x1="15" y1="1" x2="8" y2="8" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2"></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="anthropic-chat.html#">Academy</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.academy/courses">Courses</a>
            <a class="navbar-item" href="https://spring.academy/learning-path">Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="anthropic-chat.html#">Solutions</a>
          <div class="navbar-dropdown lg">
            <a class="navbar-item" href="https://spring.io/solutions">Overview</a>
            <a class="navbar-item" href="https://spring.io/support">Spring Runtime</a>
            <a class="navbar-item" href="https://spring.io/consulting">Spring Consulting</a>
            <a class="navbar-item" href="https://spring.academy/teams">Spring Academy For Teams</a>
            <a class="navbar-item" href="https://spring.io/security">Security Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="anthropic-chat.html#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/community">Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input type="checkbox" type="checkbox" id="switch-theme-checkbox" name="switch-theme-checkbox"/>
      <span class="icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
        </svg>
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'))
</script>
<div class="body">
<div class="nav-container" data-component="ai" data-version="1.1.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">Spring AI</span>
  <span class="version">1.1.0-SNAPSHOT</span>
  <button class="browse-version" id="browse-version">
    <svg height="24px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="24px" xml:space="preserve"><g><path d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"></path><path d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"></path><path d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"></path></g></svg>
  </button>
  <div class="search">
  <button class="DocSearch-Button search-button">
    <svg enable-background="new 0 0 32 32" id="Glyph" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <path d="M27.414,24.586l-5.077-5.077C23.386,17.928,24,16.035,24,14c0-5.514-4.486-10-10-10S4,8.486,4,14  s4.486,10,10,10c2.035,0,3.928-0.614,5.509-1.663l5.077,5.077c0.78,0.781,2.048,0.781,2.828,0  C28.195,26.633,28.195,25.367,27.414,24.586z M7,14c0-3.86,3.14-7,7-7s7,3.14,7,7s-3.14,7-7,7S7,17.86,7,14z" id="XMLID_223_"/>
    </svg>
    <span>Search</span>
    <span class="search-key"></span>
  </button>
</div>
</div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../index.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../concepts.html">AI Concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chatclient.html">Chat Client API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../advisors.html">Advisors</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prompt.html">Prompts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../structured-output-converter.html">Structured Output</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../multimodality.html">Multimodality</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chatmodel.html">Chat Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="comparison.html">Chat Models Comparison</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="bedrock-converse.html">Amazon Bedrock Converse</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="anthropic-chat.html">Anthropic</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="azure-openai-chat.html">Azure OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="deepseek-chat.html">DeepSeek</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="dmr-chat.html">Docker Model Runner</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="google-vertexai.html">Google VertexAI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="vertexai-gemini-chat.html">VertexAI Gemini</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="groq-chat.html">Groq</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="huggingface.html">Hugging Face</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="mistralai-chat.html">Mistral AI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="minimax-chat.html">MiniMax</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="moonshot-chat.html">Moonshot AI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="nvidia-chat.html">NVIDIA</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ollama-chat.html">Ollama</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="perplexity-chat.html">Perplexity AI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">OCI Generative AI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="oci-genai/cohere-chat.html">Cohere</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="openai-chat.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="qianfan-chat.html">QianFan</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="zhipuai-chat.html">ZhiPu AI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../embeddings.html">Embedding Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../bedrock.html">Amazon Bedrock</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../embeddings/bedrock-cohere-embedding.html">Cohere</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../embeddings/bedrock-titan-embedding.html">Titan</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/azure-openai-embeddings.html">Azure OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/mistralai-embeddings.html">Mistral AI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/minimax-embeddings.html">MiniMax</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/oci-genai-embeddings.html">OCI GenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/ollama-embeddings.html">Ollama</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/onnx.html">(ONNX) Transformers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/openai-embeddings.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/postgresml-embeddings.html">PostgresML</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/qianfan-embeddings.html">QianFan</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">VertexAI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../embeddings/vertexai-embeddings-text.html">Text Embedding</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../embeddings/vertexai-embeddings-multimodal.html">Multimodal Embedding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../embeddings/zhipuai-embeddings.html">ZhiPu AI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../imageclient.html">Image Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../image/azure-openai-image.html">Azure OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../image/openai-image.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../image/stabilityai-image.html">Stability</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../image/zhipuai-image.html">ZhiPuAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../image/qianfan-image.html">QianFan</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="anthropic-chat.html#api/audio">Audio Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../audio/transcriptions.html">Transcription API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../audio/transcriptions/azure-openai-transcriptions.html">Azure OpenAI</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../audio/transcriptions/openai-transcriptions.html">OpenAI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../audio/speech.html">Text-To-Speech (TTS) API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../audio/speech/openai-speech.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../audio/speech/elevenlabs-speech.html">ElevenLabs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="anthropic-chat.html#api/moderation">Moderation Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../moderation/openai-moderation.html">OpenAI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../moderation/mistral-ai-moderation.html">Mistral AI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chat-memory.html">Chat Memory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools.html">Tool Calling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../mcp/mcp-overview.html">Model Context Protocol (MCP)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mcp/mcp-client-boot-starter-docs.html">MCP Client Boot Starters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mcp/mcp-server-boot-starter-docs.html">MCP Server Boot Starters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mcp/mcp-helpers.html">MCP Utilities</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../retrieval-augmented-generation.html">Retrieval Augmented Generation (RAG)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../etl-pipeline.html">ETL Pipeline</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing.html">Model Evaluation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vectordbs.html">Vector Databases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/azure.html">Azure AI Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/azure-cosmos-db.html">Azure Cosmos DB</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/apache-cassandra.html">Apache Cassandra Vector Store</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/chroma.html">Chroma</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/couchbase.html">Couchbase</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/elasticsearch.html">Elasticsearch</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/gemfire.html">GemFire</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/mariadb.html">MariaDB Vector Store</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/milvus.html">Milvus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/mongodb.html">MongoDB Atlas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/neo4j.html">Neo4j</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/opensearch.html">OpenSearch</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/oracle.html">Oracle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/pgvector.html">PGvector</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/pinecone.html">Pinecone</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/qdrant.html">Qdrant</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/redis.html">Redis</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/hana.html">SAP Hana</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/typesense.html">Typesense</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vectordbs/weaviate.html">Weaviate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../observability/index.html">Observability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docker-compose.html">Development-time Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../testcontainers.html">Testcontainers</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/spring-ai-community/awesome-spring-ai">Awesome Spring AI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="prompt-engineering-patterns.html">Prompt Engineering Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../effective-agents.html">Building Effective Agents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cloud-bindings.html">Deploying to the Cloud</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../upgrade-notes.html">Upgrade Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools-migration.html">Migrating FunctionCallback to ToolCallback API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
<div class="search">
  <button class="DocSearch-Button search-button">
    <svg enable-background="new 0 0 32 32" id="Glyph" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <path d="M27.414,24.586l-5.077-5.077C23.386,17.928,24,16.035,24,14c0-5.514-4.486-10-10-10S4,8.486,4,14  s4.486,10,10,10c2.035,0,3.928-0.614,5.509-1.663l5.077,5.077c0.78,0.781,2.048,0.781,2.828,0  C28.195,26.633,28.195,25.367,27.414,24.586z M7,14c0-3.86,3.14-7,7-7s7,3.14,7,7s-3.14,7-7,7S7,17.86,7,14z" id="XMLID_223_"/>
    </svg>
    <span>Search</span>
    <span class="search-key"></span>
  </button>
</div>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div class="toc" data-title="Anthropic Chat" data-levels="2">
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="https://github.com/spring-projects/spring-ai/edit/main/spring-ai-docs/src/main/antora/modules/ROOT/pages/api/chat/anthropic-chat.adoc">
          <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"></path></svg>
          Edit this Page
        </a>
              <a href="https://github.com/spring-projects/spring-ai" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" height="512px" id="Layer_1" version="1.1" viewBox="0 0 512 512" width="512px"><style type="text/css"><![CDATA[
              .st0{fill-rule:evenodd;clip-rule:evenodd;} ]]></style><g><path class="st0" d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"></path></g></svg>
          GitHub Project
        </a>
        <a href="https://stackoverflow.com/questions/tagged/spring">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg>
          Stack Overflow
        </a>
    </div>
  </div>
</aside>
<article class="doc">
<div class="breadcrumbs-container">
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li><a href="../../index.html">Spring AI</a></li>
      <li>Reference</li>
      <li><a href="../index.html">Models</a></li>
      <li><a href="../chatmodel.html">Chat Models</a></li>
      <li><a href="anthropic-chat.html">Anthropic</a></li>
    </ul>
  </nav>
</div><div class="admonitionblock important latest">
  <table>
    <tbody><tr>
      <td class="icon">
        <i class="fa icon-important" title="Important"></i>
      </td>
      <td class="content">
        <div class="paragraph">
          <p>This version is still in development and is not considered stable yet. For the latest snapshot version, please use <a href="../../../api/chat/anthropic-chat.html">Spring AI 1.0.0</a>!</p>
        </div>
      </td>
    </tr></tbody>
  </table>
</div>
<h1 id="page-title" class="page">Anthropic Chat</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.anthropic.com/">Anthropic Claude</a> is a family of foundational AI models that can be used in a variety of applications.
For developers and businesses, you can leverage the API access and build directly on top of <a href="https://www.anthropic.com/api">Anthropic&#8217;s AI infrastructure</a>.</p>
</div>
<div class="paragraph">
<p>Spring AI supports the Anthropic <a href="https://docs.anthropic.com/claude/reference/messages_post">Messaging API</a> for sync and streaming text generations.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Anthropicâ€™s Claude models are also available through Amazon Bedrock Converse.
Spring AI provides dedicated <a href="bedrock-converse.html" class="xref page">Amazon Bedrock Converse Anthropic</a> client implementations as well.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="anthropic-chat.html#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will need to create an API key on the Anthropic portal.</p>
</div>
<div class="paragraph">
<p>Create an account at <a href="https://console.anthropic.com/dashboard">Anthropic API dashboard</a> and generate the API key on the <a href="https://console.anthropic.com/settings/keys">Get API Keys</a> page.</p>
</div>
<div class="paragraph">
<p>The Spring AI project defines a configuration property named <code>spring.ai.anthropic.api-key</code> that you should set to the value of the <code>API Key</code> obtained from anthropic.com.</p>
</div>
<div class="paragraph">
<p>You can set this configuration property in your <code>application.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">spring.ai.anthropic.api-key=&lt;your-anthropic-api-key&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For enhanced security when handling sensitive information like API keys, you can use Spring Expression Language (SpEL) to reference a custom environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># In application.yml
spring:
  ai:
    anthropic:
      api-key: ${ANTHROPIC_API_KEY}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># In your environment or .env file
export ANTHROPIC_API_KEY=&lt;your-anthropic-api-key&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also set this configuration programmatically in your application code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Retrieve API key from a secure source or environment variable
String apiKey = System.getenv("ANTHROPIC_API_KEY");</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_add_repositories_and_bom"><a class="anchor" href="anthropic-chat.html#_add_repositories_and_bom"></a>Add Repositories and BOM</h3>
<div class="paragraph">
<p>Spring AI artifacts are published in Maven Central and Spring Snapshot repositories.
Refer to the <a href="../../getting-started.html#artifact-repositories" class="xref page">Artifact Repositories</a> section to add these repositories to your build system.</p>
</div>
<div class="paragraph">
<p>To help with dependency management, Spring AI provides a BOM (bill of materials) to ensure that a consistent version of Spring AI is used throughout the entire project. Refer to the <a href="../../getting-started.html#dependency-management" class="xref page">Dependency Management</a> section to add the Spring AI BOM to your build system.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auto_configuration"><a class="anchor" href="anthropic-chat.html#_auto_configuration"></a>Auto-configuration</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There has been a significant change in the Spring AI auto-configuration, starter modules' artifact names.
Please refer to the <a href="../../../upgrade-notes.html">upgrade notes</a> for more information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Spring AI provides Spring Boot auto-configuration for the Anthropic Chat Client.
To enable it add the following dependency to your project&#8217;s Maven <code>pom.xml</code> or Gradle <code>build.gradle</code> file:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_maven" class="tab">
<p>Maven</p>
</li>
<li id="_tabs_1_gradle" class="tab">
<p>Gradle</p>
</li>
</ul>
</div>
<div id="_tabs_1_maven--panel" class="tabpanel" aria-labelledby="_tabs_1_maven">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-starter-model-anthropic&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_gradle--panel" class="tabpanel" aria-labelledby="_tabs_1_gradle">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation 'org.springframework.ai:spring-ai-starter-model-anthropic'
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Refer to the <a href="../../getting-started.html#dependency-management" class="xref page">Dependency Management</a> section to add the Spring AI BOM to your build file.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_chat_properties"><a class="anchor" href="anthropic-chat.html#_chat_properties"></a>Chat Properties</h3>
<div class="sect3">
<h4 id="_retry_properties"><a class="anchor" href="anthropic-chat.html#_retry_properties"></a>Retry Properties</h4>
<div class="paragraph">
<p>The prefix <code>spring.ai.retry</code> is used as the property prefix that lets you configure the retry mechanism for the Anthropic chat model.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 55.5555%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.max-attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of retry attempts.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.backoff.initial-interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial sleep duration for the exponential backoff policy.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.backoff.multiplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backoff interval multiplier.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.backoff.max-interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum backoff duration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3 min.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.on-client-errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If false, throw a NonTransientAiException, and do not attempt retry for <code>4xx</code> client error codes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.exclude-on-http-codes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of HTTP status codes that should NOT trigger a retry (e.g. to throw NonTransientAiException).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.retry.on-http-codes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of HTTP status codes that should trigger a retry (e.g. to throw TransientAiException).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
currently the retry policies are not applicable for the streaming API.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_connection_properties"><a class="anchor" href="anthropic-chat.html#_connection_properties"></a>Connection Properties</h4>
<div class="paragraph">
<p>The prefix <code>spring.ai.anthropic</code> is used as the property prefix that lets you connect to Anthropic.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 55.5555%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.base-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL to connect to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://api.anthropic.com" class="bare">api.anthropic.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.completions-path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to append to the base URL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/v1/chat/completions</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anthropic API version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2023-06-01</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.api-key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API Key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.beta-version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables new/experimental features. If set to <code>max-tokens-3-5-sonnet-2024-07-15</code>
the output tokens limit is increased from <code>4096</code> to <code>8192</code> tokens (for claude-3-5-sonnet only).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tools-2024-04-04</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_configuration_properties"><a class="anchor" href="anthropic-chat.html#_configuration_properties"></a>Configuration Properties</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Enabling and disabling of the chat auto-configurations are now configured via top level properties with the prefix <code>spring.ai.model.chat</code>.</p>
</div>
<div class="paragraph">
<p>To enable, spring.ai.model.chat=anthropic (It is enabled by default)</p>
</div>
<div class="paragraph">
<p>To disable, spring.ai.model.chat=none (or any value which doesn&#8217;t match anthropic)</p>
</div>
<div class="paragraph">
<p>This change is done to allow configuration of multiple models.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The prefix <code>spring.ai.anthropic.chat</code> is the property prefix that lets you configure the chat model implementation for Anthropic.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 55.5555%;">
<col style="width: 11.1112%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.enabled (Removed and no longer valid)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable Anthropic chat model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.model.chat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable Anthropic chat model.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">anthropic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the Anthropic Chat model to use. Supports: <code>claude-opus-4-0</code>, <code>claude-sonnet-4-0</code>, <code>claude-3-7-sonnet-latest</code>, <code>claude-3-5-sonnet-latest</code>, <code>claude-3-opus-20240229</code>, <code>claude-3-sonnet-20240229</code>, <code>claude-3-haiku-20240307</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>claude-3-7-sonnet-latest</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.temperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sampling temperature to use that controls the apparent creativity of generated completions. Higher values will make output more random while lower values will make results more focused and deterministic. It is not recommended to modify temperature and top_p for the same completions request as the interaction of these two settings is difficult to predict.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.max-tokens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of tokens to generate in the chat completion. The total length of input tokens and generated tokens is limited by the model&#8217;s context length.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.stop-sequence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom text sequences that will cause the model to stop generating. Our models will normally stop when they have naturally completed their turn, which will result in a response stop_reason of "end_turn". If you want the model to stop generating when it encounters custom strings of text, you can use the stop_sequences parameter. If the model encounters one of the custom sequences, the response stop_reason value will be "stop_sequence" and the response stop_sequence value will contain the matched stop sequence.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.top-p</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use nucleus sampling. In nucleus sampling, we compute the cumulative distribution over all the options for each subsequent token in decreasing probability order and cut it off once it reaches a particular probability specified by top_p. You should either alter temperature or top_p, but not both. Recommended for advanced use cases only. You usually only need to use temperature.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.top-k</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only sample from the top K options for each subsequent token. Used to remove "long tail" low probability responses. Learn more technical details here. Recommended for advanced use cases only. You usually only need to use temperature.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.toolNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of tools, identified by their names, to enable for tool calling in a single prompt requests. Tools with those names must exist in the toolCallbacks registry.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.toolCallbacks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tool Callbacks to register with the ChatModel.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.internal-tool-execution-enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If false, the Spring AI will not handle the tool calls internally, but will proxy them to the client. Then it is the client&#8217;s responsibility to handle the tool calls, dispatch them to the appropriate function, and return the results. If true (the default), the Spring AI will handle the function calls internally. Applicable only for chat models with function calling support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>deprecated</strong> - replaced by <code>toolNames</code>) spring.ai.anthropic.chat.options.functions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of functions, identified by their names, to enable for function calling in a single prompt requests. Functions with those names must exist in the functionCallbacks registry.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>deprecated</strong> - replaced by <code>toolCallbacks</code>) spring.ai.anthropic.chat.options.functionCallbacks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tool Function Callbacks to register with the ChatModel.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(<strong>deprecated</strong> - replaced by a negated <code>internal-tool-execution-enabled</code>) spring.ai.anthropic.chat.options.proxy-tool-calls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, the Spring AI will not handle the function calls internally, but will proxy them to the client. Then is the client&#8217;s responsibility to handle the function calls, dispatch them to the appropriate function, and return the results. If false (the default), the Spring AI will handle the function calls internally. Applicable only for chat models with function calling support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spring.ai.anthropic.chat.options.http-headers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional HTTP headers to be added to the chat completion request.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For the latest list of model aliases and their descriptions, see the <a href="https://docs.anthropic.com/en/docs/about-claude/models/overview#model-aliases">official Anthropic model aliases documentation</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All properties prefixed with <code>spring.ai.anthropic.chat.options</code> can be overridden at runtime by adding a request specific <a href="anthropic-chat.html#chat-options">Runtime Options</a> to the <code>Prompt</code> call.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chat-options"><a class="anchor" href="anthropic-chat.html#chat-options"></a>Runtime Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/main/java/org/springframework/ai/anthropic/AnthropicChatOptions.java">AnthropicChatOptions.java</a> provides model configurations, such as the model to use, the temperature, the max token count, etc.</p>
</div>
<div class="paragraph">
<p>On start-up, the default options can be configured with the <code>AnthropicChatModel(api, options)</code> constructor or the <code>spring.ai.anthropic.chat.options.*</code> properties.</p>
</div>
<div class="paragraph">
<p>At run-time you can override the default options by adding new, request specific, options to the <code>Prompt</code> call.
For example to override the default model and temperature for a specific request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ChatResponse response = chatModel.call(
    new Prompt(
        "Generate the names of 5 famous pirates.",
        AnthropicChatOptions.builder()
            .model("claude-3-7-sonnet-latest")
            .temperature(0.4)
        .build()
    ));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In addition to the model specific <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/main/java/org/springframework/ai/anthropic/AnthropicChatOptions.java">AnthropicChatOptions</a> you can use a portable <a href="https://github.com/spring-projects/spring-ai/blob/main/spring-ai-model/src/main/java/org/springframework/ai/chat/prompt/ChatOptions.java">ChatOptions</a> instance, created with the <a href="https://github.com/spring-projects/spring-ai/blob/main/spring-ai-model/src/main/java/org/springframework/ai/chat/prompt/DefaultChatOptionsBuilder.java">ChatOptions#builder()</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thinking"><a class="anchor" href="anthropic-chat.html#_thinking"></a>Thinking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Anthropic Claude models support a "thinking" feature that allows the model to show its reasoning process before providing a final answer. This feature enables more transparent and detailed problem-solving, particularly for complex questions that require step-by-step reasoning.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Supported Models</strong></p>
</div>
<div class="paragraph">
<p>The thinking feature is supported by the following Claude models:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Claude 4 models (<code>claude-opus-4-20250514</code>, <code>claude-sonnet-4-20250514</code>)</p>
</li>
<li>
<p>Claude 3.7 Sonnet (<code>claude-3-7-sonnet-20250219</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Model capabilities:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Claude 3.7 Sonnet</strong>: Returns full thinking output. Behavior is consistent but does not support summarized or interleaved thinking.</p>
</li>
<li>
<p><strong>Claude 4 models</strong>: Support summarized thinking, interleaved thinking, and enhanced tool integration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>API request structure is the same across all supported models, but output behavior varies.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_thinking_configuration"><a class="anchor" href="anthropic-chat.html#_thinking_configuration"></a>Thinking Configuration</h3>
<div class="paragraph">
<p>To enable thinking on any supported Claude model, include the following configuration in your request:</p>
</div>
<div class="sect3">
<h4 id="_required_configuration"><a class="anchor" href="anthropic-chat.html#_required_configuration"></a>Required Configuration</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Add the <code>thinking</code> object</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><code>"type": "enabled"</code></p>
</li>
<li>
<p><code>budget_tokens</code>: Token limit for reasoning (recommend starting at 1024)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Token budget rules</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><code>budget_tokens</code> must typically be less than <code>max_tokens</code></p>
</li>
<li>
<p>Claude may use fewer tokens than allocated</p>
</li>
<li>
<p>Larger budgets increase depth of reasoning but may impact latency</p>
</li>
<li>
<p>When using tool use with interleaved thinking (Claude 4 only), this constraint is relaxed, but not yet supported in Spring AI.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_key_considerations"><a class="anchor" href="anthropic-chat.html#_key_considerations"></a>Key Considerations</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Claude 3.7</strong> returns full thinking content in the response</p>
</li>
<li>
<p><strong>Claude 4</strong> returns a <strong>summarized</strong> version of the model&#8217;s internal reasoning to reduce latency and protect sensitive content</p>
</li>
<li>
<p><strong>Thinking tokens are billable</strong> as part of output tokens (even if not all are visible in response)</p>
</li>
<li>
<p><strong>Interleaved Thinking</strong> is only available on Claude 4 models and requires the beta header <code>interleaved-thinking-2025-05-14</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_tool_integration_and_interleaved_thinking"><a class="anchor" href="anthropic-chat.html#_tool_integration_and_interleaved_thinking"></a>Tool Integration and Interleaved Thinking</h4>
<div class="paragraph">
<p>Claude 4 models support interleaved thinking with tool use, allowing the model to reason between tool calls.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The current Spring AI implementation supports basic thinking and tool use separately, but does not yet support interleaved thinking with tool use (where thinking continues across multiple tool calls).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For details on interleaved thinking with tool use, see the <a href="https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking#extended-thinking-with-tool-use">Anthropic documentation</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_non_streaming_example"><a class="anchor" href="anthropic-chat.html#_non_streaming_example"></a>Non-streaming Example</h3>
<div class="paragraph">
<p>Here&#8217;s how to enable thinking in a non-streaming request using the ChatClient API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ChatClient chatClient = ChatClient.create(chatModel);

// For Claude 3.7 Sonnet - explicit thinking configuration required
ChatResponse response = chatClient.prompt()
    .options(AnthropicChatOptions.builder()
        .model("claude-3-7-sonnet-latest")
        .temperature(1.0)  // Temperature should be set to 1 when thinking is enabled
        .maxTokens(8192)
        .thinking(AnthropicApi.ThinkingType.ENABLED, 2048)  // Must be â‰¥1024 &amp;&amp; &lt; max_tokens
        .build())
    .user("Are there an infinite number of prime numbers such that n mod 4 == 3?")
    .call()
    .chatResponse();

// For Claude 4 models - thinking is enabled by default
ChatResponse response4 = chatClient.prompt()
    .options(AnthropicChatOptions.builder()
        .model("claude-opus-4-0")
        .maxTokens(8192)
        // No explicit thinking configuration needed
        .build())
    .user("Are there an infinite number of prime numbers such that n mod 4 == 3?")
    .call()
    .chatResponse();

// Process the response which may contain thinking content
for (Generation generation : response.getResults()) {
    AssistantMessage message = generation.getOutput();
    if (message.getText() != null) {
        // Regular text response
        System.out.println("Text response: " + message.getText());
    }
    else if (message.getMetadata().containsKey("signature")) {
        // Thinking content
        System.out.println("Thinking: " + message.getMetadata().get("thinking"));
        System.out.println("Signature: " + message.getMetadata().get("signature"));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streaming_example"><a class="anchor" href="anthropic-chat.html#_streaming_example"></a>Streaming Example</h3>
<div class="paragraph">
<p>You can also use thinking with streaming responses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ChatClient chatClient = ChatClient.create(chatModel);

// For Claude 3.7 Sonnet - explicit thinking configuration
Flux&lt;ChatResponse&gt; responseFlux = chatClient.prompt()
    .options(AnthropicChatOptions.builder()
        .model("claude-3-7-sonnet-latest")
        .temperature(1.0)
        .maxTokens(8192)
        .thinking(AnthropicApi.ThinkingType.ENABLED, 2048)
        .build())
    .user("Are there an infinite number of prime numbers such that n mod 4 == 3?")
    .stream();

// For Claude 4 models - thinking is enabled by default
Flux&lt;ChatResponse&gt; responseFlux4 = chatClient.prompt()
    .options(AnthropicChatOptions.builder()
        .model("claude-opus-4-0")
        .maxTokens(8192)
        // No explicit thinking configuration needed
        .build())
    .user("Are there an infinite number of prime numbers such that n mod 4 == 3?")
    .stream();

// For streaming, you might want to collect just the text responses
String textContent = responseFlux.collectList()
    .block()
    .stream()
    .map(ChatResponse::getResults)
    .flatMap(List::stream)
    .map(Generation::getOutput)
    .map(AssistantMessage::getText)
    .filter(text -&gt; text != null &amp;&amp; !text.isBlank())
    .collect(Collectors.joining());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tool_use_integration"><a class="anchor" href="anthropic-chat.html#_tool_use_integration"></a>Tool Use Integration</h3>
<div class="paragraph">
<p>Claude 4 models integrate thinking and tool use capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Claude 3.7 Sonnet</strong>: Supports both thinking and tool use, but they operate separately and require more explicit configuration</p>
</li>
<li>
<p><strong>Claude 4 models</strong>: Natively interleave thinking and tool use, providing deeper reasoning during tool interactions</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benefits_of_using_thinking"><a class="anchor" href="anthropic-chat.html#_benefits_of_using_thinking"></a>Benefits of Using Thinking</h3>
<div class="paragraph">
<p>The thinking feature provides several benefits:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Transparency</strong>: See the model&#8217;s reasoning process and how it arrived at its conclusion</p>
</li>
<li>
<p><strong>Debugging</strong>: Identify where the model might be making logical errors</p>
</li>
<li>
<p><strong>Education</strong>: Use the step-by-step reasoning as a teaching tool</p>
</li>
<li>
<p><strong>Complex Problem Solving</strong>: Better results on math, logic, and reasoning tasks</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that enabling thinking requires a higher token budget, as the thinking process itself consumes tokens from your allocation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_toolfunction_calling"><a class="anchor" href="anthropic-chat.html#_toolfunction_calling"></a>Tool/Function Calling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can register custom Java Tools with the <code>AnthropicChatModel</code> and have the Anthropic Claude model intelligently choose to output a JSON object containing arguments to call one or many of the registered functions.
This is a powerful technique to connect the LLM capabilities with external tools and APIs.
Read more about <a href="../tools.html" class="xref page">Tool Calling</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multimodal"><a class="anchor" href="anthropic-chat.html#_multimodal"></a>Multimodal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Multimodality refers to a model&#8217;s ability to simultaneously understand and process information from various sources, including text, pdf, images, data formats.</p>
</div>
<div class="sect2">
<h3 id="_images"><a class="anchor" href="anthropic-chat.html#_images"></a>Images</h3>
<div class="paragraph">
<p>Currently, Anthropic Claude 3 supports the <code>base64</code> source type for <code>images</code>, and the <code>image/jpeg</code>, <code>image/png</code>, <code>image/gif</code>, and <code>image/webp</code> media types.
Check the <a href="https://docs.anthropic.com/claude/docs/vision">Vision guide</a> for more information.
Anthropic Claude 3.5 Sonnet also supports the <code>pdf</code> source type for <code>application/pdf</code> files.</p>
</div>
<div class="paragraph">
<p>Spring AI&#8217;s <code>Message</code> interface supports multimodal AI models by introducing the Media type.
This type contains data and information about media attachments in messages, using Spring&#8217;s <code>org.springframework.util.MimeType</code> and a <code>java.lang.Object</code> for the raw media data.</p>
</div>
<div class="paragraph">
<p>Below is a simple code example extracted from <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/test/java/org/springframework/ai/anthropic/AnthropicChatModelIT.java">AnthropicChatModelIT.java</a>, demonstrating the combination of user text with an image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var imageData = new ClassPathResource("/multimodal.test.png");

var userMessage = new UserMessage("Explain what do you see on this picture?",
        List.of(new Media(MimeTypeUtils.IMAGE_PNG, this.imageData)));

ChatResponse response = chatModel.call(new Prompt(List.of(this.userMessage)));

logger.info(response.getResult().getOutput().getContent());</code></pre>
</div>
</div>
<div class="paragraph">
<p>It takes as an input the <code>multimodal.test.png</code> image:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://docs.spring.io/spring-ai/reference/1.1-SNAPSHOT/_images/multimodal.test.png" alt="Multimodal Test Image" width="200" height="200">
</div>
</div>
<div class="paragraph">
<p>along with the text message "Explain what do you see on this picture?", and generates a response something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The image shows a close-up view of a wire fruit basket containing several pieces of fruit.
...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pdf"><a class="anchor" href="anthropic-chat.html#_pdf"></a>PDF</h3>
<div class="paragraph">
<p>Starting with Sonnet 3.5 <a href="https://docs.anthropic.com/en/docs/build-with-claude/pdf-support">PDF support (beta)</a> is provided.
Use the <code>application/pdf</code> media type to attach a PDF file to the message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var pdfData = new ClassPathResource("/spring-ai-reference-overview.pdf");

var userMessage = new UserMessage(
        "You are a very professional document summarization specialist. Please summarize the given document.",
        List.of(new Media(new MimeType("application", "pdf"), pdfData)));

var response = this.chatModel.call(new Prompt(List.of(userMessage)));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sample_controller"><a class="anchor" href="anthropic-chat.html#_sample_controller"></a>Sample Controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://start.spring.io/">Create</a> a new Spring Boot project and add the <code>spring-ai-starter-model-anthropic</code> to your pom (or gradle) dependencies.</p>
</div>
<div class="paragraph">
<p>Add a <code>application.properties</code> file, under the <code>src/main/resources</code> directory, to enable and configure the Anthropic chat model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-application.properties hljs" data-lang="application.properties">spring.ai.anthropic.api-key=YOUR_API_KEY
spring.ai.anthropic.chat.options.model=claude-3-5-sonnet-latest
spring.ai.anthropic.chat.options.temperature=0.7
spring.ai.anthropic.chat.options.max-tokens=450</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Replace the <code>api-key</code> with your Anthropic credentials.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will create a <code>AnthropicChatModel</code> implementation that you can inject into your class.
Here is an example of a simple <code>@Controller</code> class that uses the chat model for text generations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RestController
public class ChatController {

    private final AnthropicChatModel chatModel;

    @Autowired
    public ChatController(AnthropicChatModel chatModel) {
        this.chatModel = chatModel;
    }

    @GetMapping("/ai/generate")
    public Map generate(@RequestParam(value = "message", defaultValue = "Tell me a joke") String message) {
        return Map.of("generation", this.chatModel.call(message));
    }

    @GetMapping("/ai/generateStream")
	public Flux&lt;ChatResponse&gt; generateStream(@RequestParam(value = "message", defaultValue = "Tell me a joke") String message) {
        Prompt prompt = new Prompt(new UserMessage(message));
        return this.chatModel.stream(prompt);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_manual_configuration"><a class="anchor" href="anthropic-chat.html#_manual_configuration"></a>Manual Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/main/java/org/springframework/ai/anthropic/AnthropicChatModel.java">AnthropicChatModel</a> implements the <code>ChatModel</code> and <code>StreamingChatModel</code> and uses the <a href="anthropic-chat.html#low-level-api">Low-level AnthropicApi Client</a> to connect to the Anthropic service.</p>
</div>
<div class="paragraph">
<p>Add the <code>spring-ai-anthropic</code> dependency to your project&#8217;s Maven <code>pom.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;
    &lt;artifactId&gt;spring-ai-anthropic&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or to your Gradle <code>build.gradle</code> build file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation 'org.springframework.ai:spring-ai-anthropic'
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Refer to the <a href="../../getting-started.html#dependency-management" class="xref page">Dependency Management</a> section to add the Spring AI BOM to your build file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, create a <code>AnthropicChatModel</code> and use it for text generations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">var anthropicApi = new AnthropicApi(System.getenv("ANTHROPIC_API_KEY"));

var chatModel = new AnthropicChatModel(this.anthropicApi,
        AnthropicChatOptions.builder()
            .model("claude-3-opus-20240229")
            .temperature(0.4)
            .maxTokens(200)
        .build());

ChatResponse response = this.chatModel.call(
    new Prompt("Generate the names of 5 famous pirates."));

// Or with streaming responses
Flux&lt;ChatResponse&gt; response = this.chatModel.stream(
    new Prompt("Generate the names of 5 famous pirates."));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AnthropicChatOptions</code> provides the configuration information for the chat requests.
The <code>AnthropicChatOptions.Builder</code> is fluent options builder.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="low-level-api"><a class="anchor" href="anthropic-chat.html#low-level-api"></a>Low-level AnthropicApi Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/main/java/org/springframework/ai/anthropic/api/AnthropicApi.java">AnthropicApi</a> provides is lightweight Java client for <a href="https://docs.anthropic.com/claude/reference/messages_post">Anthropic Message API</a>.</p>
</div>
<div class="paragraph">
<p>Following class diagram illustrates the <code>AnthropicApi</code> chat interfaces and building blocks:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://docs.spring.io/spring-ai/reference/1.1-SNAPSHOT/_images/anthropic-claude3-class-diagram.jpg" alt="AnthropicApi Chat API Diagram" width="1000">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://docs.spring.io/spring-ai/reference/1.1-SNAPSHOT/_images/anthropic-claude3-events-model.jpg" alt="AnthropicApi Event Model" width="1000">
</div>
</div>
<div class="paragraph">
<p>Here is a simple snippet how to use the api programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">AnthropicApi anthropicApi =
    new AnthropicApi(System.getenv("ANTHROPIC_API_KEY"));

AnthropicMessage chatCompletionMessage = new AnthropicMessage(
        List.of(new ContentBlock("Tell me a Joke?")), Role.USER);

// Sync request
ResponseEntity&lt;ChatCompletionResponse&gt; response = this.anthropicApi
    .chatCompletionEntity(new ChatCompletionRequest(AnthropicApi.ChatModel.CLAUDE_3_OPUS.getValue(),
            List.of(this.chatCompletionMessage), null, 100, 0.8, false));

// Streaming request
Flux&lt;StreamResponse&gt; response = this.anthropicApi
    .chatCompletionStream(new ChatCompletionRequest(AnthropicApi.ChatModel.CLAUDE_3_OPUS.getValue(),
            List.of(this.chatCompletionMessage), null, 100, 0.8, true));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow the <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/main/java/org/springframework/ai/anthropic/api/AnthropicApi.java">AnthropicApi.java</a>'s JavaDoc for further information.</p>
</div>
<div class="sect2">
<h3 id="_low_level_api_examples"><a class="anchor" href="anthropic-chat.html#_low_level_api_examples"></a>Low-level API Examples</h3>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://github.com/spring-projects/spring-ai/blob/main/models/spring-ai-anthropic/src/test/java/org/springframework/ai/anthropic/chat/api/AnthropicApiIT.java">AnthropicApiIT.java</a> test provides some general examples how to use the lightweight library.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="bedrock-converse.html">Amazon Bedrock Converse</a></span>
  <span class="next"><a href="azure-openai-chat.html">Azure OpenAI</a></span>
</nav>
</article>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
              <div class="colset">
                <div class="col-left">

                  <ul class="nav-versions">
                      <li class="component">
                        <div>
                          <a class="title" href="../../../index.html">Spring AI</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../../index.html">
      1.0.0
    </a>
  </li>
</ul>                        </div>
                        <div class="version-item">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Snapshot
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../index.html">
      1.1.0-SNAPSHOT
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                  </ul>
                </div>
                <div class="col-right">
                  <ul class="projects">
  <li>
    Related Spring Documentation
    <ul class="projects-list">
        <li>
<a href="https://docs.spring.io/spring-boot/">
  Spring Boot
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-framework/reference/">
  Spring Framework
</a>
</li>
        <li>
<a class="anchor"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
  Spring Cloud
<ul>
    <li>
<a href="https://docs.spring.io/spring-cloud-build/reference/">
  Spring Cloud Build
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-bus/reference/">
  Spring Cloud Bus
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-circuitbreaker/reference/">
  Spring Cloud Circuit Breaker
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-commons/reference/">
  Spring Cloud Commons
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-config/reference/">
  Spring Cloud Config
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-consul/reference/">
  Spring Cloud Consul
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-contract/reference/">
  Spring Cloud Contract
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-function/reference/">
  Spring Cloud Function
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-gateway/reference/">
  Spring Cloud Gateway
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-kubernetes/reference/">
  Spring Cloud Kubernetes
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-netflix/reference/">
  Spring Cloud Netflix
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-openfeign/reference/">
  Spring Cloud OpenFeign
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-stream/reference/">
  Spring Cloud Stream
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-task/reference/">
  Spring Cloud Task
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-vault/reference/">
  Spring Cloud Vault
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-cloud-zookeeper/reference/">
  Spring Cloud Zookeeper
</a>
</li>
</ul>
</li>
        <li>
<a class="anchor"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
  Spring Data
<ul>
    <li>
<a href="https://docs.spring.io/spring-data/cassandra/reference/">
  Spring Data Cassandra
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/commons/reference/">
  Spring Data Commons
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/couchbase/reference/">
  Spring Data Couchbase
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/elasticsearch/reference/">
  Spring Data Elasticsearch
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/jpa/reference/">
  Spring Data JPA
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/keyvalue/reference/">
  Spring Data KeyValue
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/ldap/reference/">
  Spring Data LDAP
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/mongodb/reference/">
  Spring Data MongoDB
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/neo4j/reference/">
  Spring Data Neo4j
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/redis/reference/">
  Spring Data Redis
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/relational/reference/">
  Spring Data JDBC &amp; R2DBC
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-data/rest/reference/">
  Spring Data REST
</a>
</li>
</ul>
</li>
        <li>
<a href="https://docs.spring.io/spring-integration/reference/">
  Spring Integration
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-batch/reference/">
  Spring Batch
</a>
</li>
        <li>
<a class="anchor"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
<a href="https://docs.spring.io/spring-security/reference/">
  Spring Security
</a>
<ul>
    <li>
<a href="https://docs.spring.io/spring-authorization-server/reference/">
  Spring Authorization Server
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-ldap/reference/">
  Spring LDAP
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-security-kerberos/reference/">
  Spring Security Kerberos
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-session/reference/">
  Spring Session
</a>
</li>
    <li>
<a href="https://docs.spring.io/spring-vault/reference/">
  Spring Vault
</a>
</li>
</ul>
</li>
        <li>
<a href="../../../index.html">
  Spring AI
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-amqp/reference/">
  Spring AMQP
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-cli/reference/">
  Spring CLI
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-graphql/reference/">
  Spring GraphQL
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-kafka/reference/">
  Spring for Apache Kafka
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-modulith/reference/">
  Spring Modulith
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-pulsar/reference/">
  Spring for Apache Pulsar
</a>
</li>
        <li>
<a href="https://docs.spring.io/spring-shell/reference/">
  Spring Shell
</a>
</li>
    </ul>
  </li
  <li><a href="../../../spring-projects.html">All Docs...</a></li>
</ul>
                </div>
              </div>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="https://docs.spring.io/spring-ai/reference/_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">Copyright Â© 2005 - <script>var d = new Date();
        document.write(d.getFullYear());</script> Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.<br/><a href="https://www.vmware.com/help/legal.html">Terms of Use</a> â€¢ <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> â€¢ <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">â€¢ <a href="https://spring.io/thank-you">Thank you</a></span> â€¢ <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> â€¢ <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">ApacheÂ®, Apache TomcatÂ®, Apache KafkaÂ®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. KubernetesÂ® is a registered trademark of the Linux Foundation in the United States and other countries. LinuxÂ® is the registered trademark of Linus Torvalds in the United States and other countries. WindowsÂ® and MicrosoftÂ® Azure are registered trademarks of Microsoft Corporation. â€œAWSâ€ and â€œAmazon Web Servicesâ€ are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="GitHub"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="https://docs.spring.io/spring-ai/reference/_/js/vendor/import.js"></script>
<script src="https://docs.spring.io/spring-ai/reference/_/js/site.js"></script>
<script async src="https://docs.spring.io/spring-ai/reference/_/js/vendor/highlight.js"></script>
<script async src="https://docs.spring.io/spring-ai/reference/_/js/vendor/asciidoctor-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>

<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
            <main class="modal__content" id="modal-1-content">
                <div id="searchbox"></div>
                <div id="counter"></div>
                <div class="search-link-box">
                    <a class="search-link" href="../../../search.html">Search in all Spring Docs</a>
                </div>
                <div class="search-by">
                    <a target="_blank" rel="noopener noreferrer" href="https://www.algolia.com/" aria-label="Search by Algolia">
                        <img class="light" width="140" src="https://docs.spring.io/spring-ai/reference/_/img/algolia-light.svg"/>
                        <img class="dark" width="140" src="https://docs.spring.io/spring-ai/reference/_/img/algolia-dark.svg"/>
                    </a>
                </div>
                <div id="hits"></div>
            </main>
        </div>
    </div>
</div>

<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.17.0/dist/algoliasearch-lite.umd.js" integrity="sha256-Lf9DrpGmcRip6OQzbcL6lnvNmoZNSKpyQX5pMlwatWE=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.54.1/dist/instantsearch.production.min.js" integrity="sha256-xYsZPDeNjYNTBWLvqD2Lxe98hOxcDgOHyMPfz4tVAbk=" crossorigin="anonymous"></script>
<script async id="search-script" src="https://docs.spring.io/spring-ai/reference/_/js/vendor/search.js" data-app-id="WB1FQYI187" data-api-key="c2e84f15fa630d534f1c62b1c413bb77" data-index-name="springdocs" data-stylesheet="../../../_/css/vendor/search.css" data-page-version="1.1.0" data-page-component="ai"></script>
  <script>if (window.parent == window) {(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-2728886-23', 'auto', {'siteSpeedSampleRate': 100});ga('send', 'pageview');}</script></body>
</html>
